<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VRTK使用FinalIK绑定人物模型 | 阿信 : 地平线上的一匹狼</title>
    <meta name="description" content="VR">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link rel="stylesheet" href="http://cdn.be-sunshine.cn/winter.css">
    <meta name="keywords" content="VR">
    <link rel="preload" href="/dist/assets/css/0.styles.222434de.css" as="style"><link rel="preload" href="/dist/assets/js/app.88fee21b.js" as="script"><link rel="preload" href="/dist/assets/js/2.cb9dfe60.js" as="script"><link rel="preload" href="/dist/assets/js/36.ff7f6536.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.2162c06b.js"><link rel="prefetch" href="/dist/assets/js/11.e00e50fe.js"><link rel="prefetch" href="/dist/assets/js/12.307a11fc.js"><link rel="prefetch" href="/dist/assets/js/13.94181830.js"><link rel="prefetch" href="/dist/assets/js/14.a9c2252d.js"><link rel="prefetch" href="/dist/assets/js/15.1baed7f4.js"><link rel="prefetch" href="/dist/assets/js/16.c8a395bc.js"><link rel="prefetch" href="/dist/assets/js/17.60acf185.js"><link rel="prefetch" href="/dist/assets/js/18.05751e5c.js"><link rel="prefetch" href="/dist/assets/js/19.c46a81d0.js"><link rel="prefetch" href="/dist/assets/js/20.baf14473.js"><link rel="prefetch" href="/dist/assets/js/21.444affde.js"><link rel="prefetch" href="/dist/assets/js/22.d0c921ef.js"><link rel="prefetch" href="/dist/assets/js/23.4fe6ae08.js"><link rel="prefetch" href="/dist/assets/js/24.068dff50.js"><link rel="prefetch" href="/dist/assets/js/25.b3c9b138.js"><link rel="prefetch" href="/dist/assets/js/26.5e819541.js"><link rel="prefetch" href="/dist/assets/js/27.a67c3885.js"><link rel="prefetch" href="/dist/assets/js/28.bf684966.js"><link rel="prefetch" href="/dist/assets/js/29.500bffbe.js"><link rel="prefetch" href="/dist/assets/js/3.a2422018.js"><link rel="prefetch" href="/dist/assets/js/30.49e855eb.js"><link rel="prefetch" href="/dist/assets/js/31.1362b6bb.js"><link rel="prefetch" href="/dist/assets/js/32.101925a0.js"><link rel="prefetch" href="/dist/assets/js/33.d8afcba8.js"><link rel="prefetch" href="/dist/assets/js/34.fdb85815.js"><link rel="prefetch" href="/dist/assets/js/35.e538bea3.js"><link rel="prefetch" href="/dist/assets/js/37.25a983e4.js"><link rel="prefetch" href="/dist/assets/js/38.2668a3bf.js"><link rel="prefetch" href="/dist/assets/js/39.3b9cc38a.js"><link rel="prefetch" href="/dist/assets/js/4.d9ebe5d7.js"><link rel="prefetch" href="/dist/assets/js/40.cc597ea5.js"><link rel="prefetch" href="/dist/assets/js/41.ba53122c.js"><link rel="prefetch" href="/dist/assets/js/42.b31c7adb.js"><link rel="prefetch" href="/dist/assets/js/5.b7b10ecd.js"><link rel="prefetch" href="/dist/assets/js/6.29d3e133.js"><link rel="prefetch" href="/dist/assets/js/7.d06607d3.js"><link rel="prefetch" href="/dist/assets/js/8.4a5c0f66.js"><link rel="prefetch" href="/dist/assets/js/9.62046ef1.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.222434de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><img src="/dist/logo.png" alt="阿信 : 地平线上的一匹狼" class="logo"> <span class="site-name can-hide">阿信 : 地平线上的一匹狼</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Spring技术栈</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">分布式</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Flask</a></li><li class="dropdown-subitem"><a href="/dist/programming_language/python/DataScience/numpy.html" class="nav-link">Numpy</a></li></ul></li><li class="dropdown-item"><h4>C++</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/note/G1M/Cpp/Cplus.html" class="nav-link">高级语法</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="人工智能" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html" class="nav-link">Tensorflow</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/ml/Modle_Represen.html" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/dl/about.html" class="nav-link">神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">落書</a></li><li class="dropdown-item"><!----> <a href="/dist/zh/first/" class="nav-link">手记</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">歌记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/poem/pm.html" class="nav-link">诗记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><span class="title">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/general/mysql/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/dist/algorithm/dp/dp.html" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/advance_ds/priority_queue.html" class="nav-link">高级数据结构</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/Digital_Image/Introduce.html" class="nav-link">数字图像处理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="游戏/VR/AR开发" class="dropdown-title"><span class="title">游戏/VR/AR开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/xr/vr/Unity.html" class="nav-link">VR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">AR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">GameMakerStudio</a></li></ul></div></div><div class="nav-item"><a href="http://be-sunshine.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/834930269/834930269.github.io/tree/master/dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Spring技术栈</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">分布式</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Flask</a></li><li class="dropdown-subitem"><a href="/dist/programming_language/python/DataScience/numpy.html" class="nav-link">Numpy</a></li></ul></li><li class="dropdown-item"><h4>C++</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/note/G1M/Cpp/Cplus.html" class="nav-link">高级语法</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="人工智能" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html" class="nav-link">Tensorflow</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/ml/Modle_Represen.html" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/dl/about.html" class="nav-link">神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">落書</a></li><li class="dropdown-item"><!----> <a href="/dist/zh/first/" class="nav-link">手记</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">歌记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/poem/pm.html" class="nav-link">诗记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><span class="title">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/general/mysql/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/dist/algorithm/dp/dp.html" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/advance_ds/priority_queue.html" class="nav-link">高级数据结构</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/Digital_Image/Introduce.html" class="nav-link">数字图像处理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="游戏/VR/AR开发" class="dropdown-title"><span class="title">游戏/VR/AR开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/xr/vr/Unity.html" class="nav-link">VR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">AR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">GameMakerStudio</a></li></ul></div></div><div class="nav-item"><a href="http://be-sunshine.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/834930269/834930269.github.io/tree/master/dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>虚拟现实</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dist/xr/vr/Unity.html" class="sidebar-link">Unity杂记 - 异步</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#安装finalik">安装FinalIK</a></li></ul></div><p></p> <hr> <h1 id="final-ik"><a href="#final-ik" class="header-anchor">#</a> Final IK</h1> <hr> <p>       就上节我们已经知道了如何在没有VR设备的条件下进行VR的编程,那么本节就一起来试着将人物模型与VRTK绑定起来实现<code>可控人物</code>,而非空气中漂浮的设备.</p> <hr> <h2 id="安装finalik"><a href="#安装finalik" class="header-anchor">#</a> 安装FinalIK</h2> <hr> <p>       这里我提供一个FinalIK插件和人物模型(来自于siki学院老师在b站发布的教学视频,不过老师是在SteamVR上插入的,这里稍微拓展到VRTK上)</p> <p>链接：https://pan.baidu.com/s/1_nZGv2fR-Camn9zEs-S3bw</p> <p>提取码：w5ho</p> <p>       当我们导入后项目中会多这两个文件夹:</p> <p><img src="http://cdn.be-sunshine.cn/ADD_Comp.png" alt=""></p> <p>       展开找到下图所指的文件夹,其中<code>kachujin_g_rosales_Fing</code>就是我们需要绑定的人物模型</p> <p><img src="http://cdn.be-sunshine.cn/mode.png" alt=""></p> <p>       将它拖入到场景中.</p> <p><img src="http://cdn.be-sunshine.cn/mode2.png" alt=""></p> <p>       然后将其做成prefab(预制体),以便添加组件(拖下去就可以了):</p> <p><img src="http://cdn.be-sunshine.cn/prefab.png" alt=""></p> <p>       在prefab中添加组件VRIK</p> <p><img src="http://cdn.be-sunshine.cn/VRIK.png" alt=""></p> <p>       VRIK是FinalIK下的一个子组件,专门用于VR的,VRIK会自动查找到所有的骨骼依赖,为什么可以实现这个功能呢?注意,这有一点是前置条件 <code>人物模型必须是骨骼结构,且其Inspector下的Rig-Animation Type必须是Humanoid类型的</code>.这两个前置条件达成VRIK就可以自己寻找到所有的骨骼结构了(比如腿,胳膊,手)</p> <p><img src="http://cdn.be-sunshine.cn/VRIKREF.png" alt=""></p> <p>       但是还有几个骨骼部分是需要自己添加的,因为这几个骨骼是依赖于VR的SDK的,其分别是<code>脖子</code>,<code>左手</code>,<code>右手</code>.常见的VR设备只需要添加这三个即可,在<code>Solver</code>下.其中<code>Spine</code>是头部
<img src="http://cdn.be-sunshine.cn/VRIKSOLVER.png" alt=""></p> <p>       那么这三个组件要在哪里呢?我们现在示范一下无设备下的VRSimulator,VRSimulator在默认场景的VRTK_SDKManager下,展开以后可以看到VRSimulator_CameraRig下有Neck,LeftHand,RightHand.这三个GameObject就是我们所需要的.首先我们需要在Neck下新建一个空的GameObject,同样命名为Neck即可,之后我们将它们分别拖入到对应的位置上.</p> <p><img src="http://cdn.be-sunshine.cn/VRTK2.png" alt=""></p> <p>       大功告成,进入游戏就可以看到自己能够控制人物了,头转动她也会转,手柄动了她也会动!</p> <p><img src="http://cdn.be-sunshine.cn/Emm.png" alt=""></p> <p>       Emmm...有丶惊悚啊...因为我们用的方式是鼠标键盘,所以实际上任何部位都可以无限拉伸,就导致了这种情况啦...</p> <p>       那么问题来了,<code>如何在使用物理手柄的时候绑定VRIK呢?</code></p> <p>       其实道理一样,VRTK_SDKManager下有许多SDK,每个SDK下都有对应的Neck,LeftHand和RightHand,如法炮制即可.</p> <p><img src="http://cdn.be-sunshine.cn/VRTK_SDK.png" alt=""></p> <p>       至于如何实现切换设备的同时也可以让VRIK可以适配各种设备,其实有两种方法,一种方法是用代码切换,另一种比较暴力的方法就是在每个SDK下面放一个模型,并且配置好模型对应的脖子和手的GameObject依赖,当VRTK_SDK自动切换SDK时就会自动激活信的模型,并且隐藏旧的模型.</p> <p><img src="http://cdn.be-sunshine.cn/VRTK_SDK2.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/834930269/834930269.github.io/tree/master/dist/edit/master/docs/xr/vr/FinalIK.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/dist/assets/js/app.88fee21b.js" defer></script><script src="/dist/assets/js/2.cb9dfe60.js" defer></script><script src="/dist/assets/js/36.ff7f6536.js" defer></script>
  </body>
</html>
