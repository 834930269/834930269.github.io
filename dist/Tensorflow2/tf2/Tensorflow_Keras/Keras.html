<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tensorflow2笔记 | 阿信 : 地平线上的一匹狼</title>
    <meta name="description" content="Tensorflow2笔记">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link rel="stylesheet" href="http://cdn.be-sunshine.cn/winter.css">
    <meta name="keywords" content="Tensorflow2">
    <link rel="preload" href="/dist/assets/css/0.styles.222434de.css" as="style"><link rel="preload" href="/dist/assets/js/app.7295b2e3.js" as="script"><link rel="preload" href="/dist/assets/js/2.cb9dfe60.js" as="script"><link rel="preload" href="/dist/assets/js/8.4a5c0f66.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.2162c06b.js"><link rel="prefetch" href="/dist/assets/js/11.e00e50fe.js"><link rel="prefetch" href="/dist/assets/js/12.307a11fc.js"><link rel="prefetch" href="/dist/assets/js/13.94181830.js"><link rel="prefetch" href="/dist/assets/js/14.a9c2252d.js"><link rel="prefetch" href="/dist/assets/js/15.e3343040.js"><link rel="prefetch" href="/dist/assets/js/16.a3b89fb6.js"><link rel="prefetch" href="/dist/assets/js/17.60acf185.js"><link rel="prefetch" href="/dist/assets/js/18.88b5ee0b.js"><link rel="prefetch" href="/dist/assets/js/19.e8df862a.js"><link rel="prefetch" href="/dist/assets/js/20.ee6fa7fa.js"><link rel="prefetch" href="/dist/assets/js/21.db33df68.js"><link rel="prefetch" href="/dist/assets/js/22.cfbee31f.js"><link rel="prefetch" href="/dist/assets/js/23.70151ff8.js"><link rel="prefetch" href="/dist/assets/js/24.aa085ccf.js"><link rel="prefetch" href="/dist/assets/js/25.836e2533.js"><link rel="prefetch" href="/dist/assets/js/26.1da99479.js"><link rel="prefetch" href="/dist/assets/js/27.41ecdc01.js"><link rel="prefetch" href="/dist/assets/js/28.2c60e0b3.js"><link rel="prefetch" href="/dist/assets/js/29.6fc9291d.js"><link rel="prefetch" href="/dist/assets/js/3.7b4b5b9a.js"><link rel="prefetch" href="/dist/assets/js/30.c864c090.js"><link rel="prefetch" href="/dist/assets/js/31.2086cd08.js"><link rel="prefetch" href="/dist/assets/js/4.d9ebe5d7.js"><link rel="prefetch" href="/dist/assets/js/5.b7b10ecd.js"><link rel="prefetch" href="/dist/assets/js/6.e3226cfe.js"><link rel="prefetch" href="/dist/assets/js/7.76a84986.js"><link rel="prefetch" href="/dist/assets/js/9.62046ef1.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.222434de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><img src="/dist/logo.png" alt="阿信 : 地平线上的一匹狼" class="logo"> <span class="site-name can-hide">阿信 : 地平线上的一匹狼</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Spring技术栈</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">分布式</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Flask</a></li><li class="dropdown-subitem"><a href="/dist/programming_language/python/DataScience/numpy.html" class="nav-link">Numpy</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="人工智能" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html" class="nav-link router-link-exact-active router-link-active">Tensorflow</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/ml/Modle_Represen.html" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/dl/about.html" class="nav-link">神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">落書</a></li><li class="dropdown-item"><!----> <a href="/dist/zh/first/" class="nav-link">手记</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">歌记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/poem/pm.html" class="nav-link">诗记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/" class="nav-link">研一下课程笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><span class="title">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/general/mysql/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/dist/algorithm/dp/dp.html" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="游戏/VR/AR开发" class="dropdown-title"><span class="title">游戏/VR/AR开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/xr/vr/Unity.html" class="nav-link">VR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">AR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">GameMakerStudio</a></li></ul></div></div><div class="nav-item"><a href="http://be-sunshine.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/834930269/834930269.github.io/tree/master/dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Spring技术栈</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">分布式</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dist/" class="nav-link">语言高级特性</a></li><li class="dropdown-subitem"><a href="/dist/" class="nav-link">Flask</a></li><li class="dropdown-subitem"><a href="/dist/programming_language/python/DataScience/numpy.html" class="nav-link">Numpy</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="人工智能" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html" class="nav-link router-link-exact-active router-link-active">Tensorflow</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/ml/Modle_Represen.html" class="nav-link">机器学习</a></li><li class="dropdown-item"><!----> <a href="/dist/ai/dl/about.html" class="nav-link">神经网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂记" class="dropdown-title"><span class="title">杂记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">落書</a></li><li class="dropdown-item"><!----> <a href="/dist/zh/first/" class="nav-link">手记</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">歌记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/poem/pm.html" class="nav-link">诗记</a></li><li class="dropdown-item"><!----> <a href="/dist/note/G1M/" class="nav-link">研一下课程笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><span class="title">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/general/mysql/mysql.html" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/dist/algorithm/dp/dp.html" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="游戏/VR/AR开发" class="dropdown-title"><span class="title">游戏/VR/AR开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/xr/vr/Unity.html" class="nav-link">VR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">AR</a></li><li class="dropdown-item"><!----> <a href="/dist/" class="nav-link">GameMakerStudio</a></li></ul></div></div><div class="nav-item"><a href="http://be-sunshine.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/834930269/834930269.github.io/tree/master/dist" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tensorflow笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html" class="active sidebar-link">Tensorflow2笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html#理论部分" class="sidebar-link">理论部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html#分类问题与回归问题" class="sidebar-link">分类问题与回归问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html#数据封装-tf-data" class="sidebar-link">数据封装 - tf.data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html#常用api" class="sidebar-link">常用API</a></li><li class="sidebar-sub-header"><a href="/dist/Tensorflow2/tf2/Tensorflow_Keras/Keras.html#实战-手写数字识别" class="sidebar-link">实战 - 手写数字识别</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#理论部分">理论部分</a><ul><li><a href="#分类问题与回归问题">分类问题与回归问题</a></li></ul></li><li><a href="#数据封装-tf-data">数据封装 - tf.data</a><ul><li><a href="#常用api">常用API</a></li><li><a href="#实战-手写数字识别">实战 - 手写数字识别</a></li></ul></li></ul></div><p></p> <h1 id="tensorflow2-开篇"><a href="#tensorflow2-开篇" class="header-anchor">#</a> Tensorflow2-开篇</h1> <h2 id="理论部分"><a href="#理论部分" class="header-anchor">#</a> 理论部分</h2> <blockquote><p>Tf-keras是什么?</p></blockquote> <ul><li>Tensorflow对keras API规范的实现</li> <li>相对于以tensorflow为后端的keras,tensorflow-keras与Tensorflow结合更加紧密</li> <li>实现在tf.keras空间下</li></ul> <blockquote><p>Tf-keras和keras联系</p></blockquote> <ul><li>基于同一套API
<ul><li>keras程序可以通过改导入方式轻松转为tf.keras程序</li> <li>反之不可能</li></ul></li> <li>相同的JSON和HDF5模型序列化格式和语义</li></ul> <blockquote><p>区别</p></blockquote> <ul><li>Tf-keras 全面支持eager mode
<ul><li>只是用keras.Sequential和keras.Model无影响</li> <li>自定义Model内部运算逻辑有影响
<ul><li>tf底层api可以通过使用keras的model.fit等抽象</li> <li>适合研究人员</li></ul></li></ul></li> <li>支持基于tf.data的模型训练</li> <li>支持TPU训练</li> <li>支持tf.distribution中的分布策略</li> <li>其他特性
<ul><li>TF.keras可以与Tf中的estimator集成</li> <li>可以用tf.save</li></ul></li></ul> <h3 id="分类问题与回归问题"><a href="#分类问题与回归问题" class="header-anchor">#</a> 分类问题与回归问题</h3> <ol><li><p>分类问题预测的是类别,模型输出的是概率分布</p> <ul><li>三分类问题输出例子 : [0.2,0.7,0.1]</li></ul></li> <li><p>回归问题预测的是值,模型的输出是一个实数值</p></li></ol> <h4 id="目标函数"><a href="#目标函数" class="header-anchor">#</a> 目标函数</h4> <blockquote><p>为什么需要目标函数?</p></blockquote> <ul><li>参数是逐步调整的</li> <li>目标函数可以帮助衡量模型的好坏
<ul><li>Model A: [0.1,0.4,0.5]</li> <li>Modle B: [0.1,0.2,0.7]</li></ul></li></ul> <p>       如上面两组结果,模型A与模型B都可以得出第三组数据为最终的结果,但这两组模型的效果是不同的,如第二组和第三组的概率差别较大,所以,当我们为了衡量魔性的好坏时,我们就需要用到目标函数.</p> <hr> <blockquote><p>分类问题的目标函数</p></blockquote> <hr> <ol><li>需要衡量目标类别与当前预测的差距
<ul><li>三分类问题输出例子: [0.2,0.7,0.1]</li> <li>三分类真是类别: 2 -&gt; one_hot -&gt; [0,0,1]</li></ul></li> <li>one_hot,字面意思,某一个值为热点,即答案时,将其置位1,琦玉均为0.即真实值的分布.</li> <li>通过损失函数(目标函数)来判断真实值与模型输出值得差距.</li></ol> <p><code>Tip: MarkdownPad上配置的Latex只能使用equation</code> <code>下面损失函数中 y 均为真实值, Model(x)为预测值</code></p> <p><strong>平方均差损失函数</strong></p> <p>\begin{equation}
\frac{1}{n} \sum_{x,y} \frac{1}{2}(y-Model(x))^2
\end{equation}</p> <p><strong>交叉熵损失函数</strong></p> <p>\begin{equation}
\frac{1}{n} \sum_{x,y} y \ln{(Model(x))}
\end{equation}</p> <hr> <blockquote><p>回归问题的目标函数</p></blockquote> <hr> <pre><code>因为回归问题输入输出均为值,所以只需要判断其预测值与真实值的差异即可.
</code></pre> <ul><li>预测值与真实值的差异</li> <li>平方差损失</li> <li>绝对值损失</li></ul> <p><strong>模型的训练就是通过调整参数,使损失(目标)函数的值逐渐缩小的过程.</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>VuePress中列表的层级必须用Tab,不能用空格</p></div> <h2 id="数据封装-tf-data"><a href="#数据封装-tf-data" class="header-anchor">#</a> 数据封装 - tf.data</h2> <p>       在Tensorflow1中,数据是需要放在队列中.而Tf2引入keras后,同时简化数据的读取,可以直接放在tf.keras.Dataset中进行操作.</p> <h3 id="常用api"><a href="#常用api" class="header-anchor">#</a> 常用API</h3> <ol><li>从list中创建dataset</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf
dataset <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>遍历</li></ol> <p><code>会发现它其实是存放在tensor中的</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">for</span> elem indataset<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>转换成numpy</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#转换成numpy</span>
<span class="token keyword">for</span> elem <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li>二维示例</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>dataset <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">[</span>
                                                   <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
                                            <span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> elem <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>[1 2]
[3 4]
[5 6]
</code></pre></div><ol start="5"><li>不通过遍历取第一个元素</li></ol> <p><code>需要转换成迭代器后调用next()</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 取第一个元素</span>
<span class="token builtin">next</span><span class="token punctuation">(</span><span class="token builtin">iter</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># .numpy()</span>
</code></pre></div><ol start="6"><li>打乱顺序</li></ol> <p>       参数是混乱程度</p> <div class="language-python extra-class"><pre class="language-python"><code>dataset_c <span class="token operator">=</span> dataset<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><ol start="7"><li>数据重复</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>dataset_c <span class="token operator">=</span> dataset_c<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><ol start="8"><li>每次取出一定数量的数据</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>dataset_c <span class="token operator">=</span> dataset_c<span class="token punctuation">.</span>batch<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> elem <span class="token keyword">in</span> dataset_c<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="9"><li>将每个数据都变成平方(传递函数)</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>dataset <span class="token operator">=</span> dataset<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>square<span class="token punctuation">)</span>
<span class="token keyword">for</span> elem <span class="token keyword">in</span> dataset<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="10"><li>打包两组数据</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>dataset <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
dataset2 <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span>from_tensor_slices<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ds <span class="token operator">=</span> tf<span class="token punctuation">.</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">.</span><span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dataset<span class="token punctuation">,</span> dataset2<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="实战-手写数字识别"><a href="#实战-手写数字识别" class="header-anchor">#</a> 实战 - 手写数字识别</h3> <p><a href="/dist/ai/dl/project.html#_4-手写数字识别">手写数字识别实例</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/834930269/834930269.github.io/tree/master/dist/edit/master/docs/Tensorflow2/tf2/Tensorflow_Keras/Keras.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/dist/assets/js/app.7295b2e3.js" defer></script><script src="/dist/assets/js/2.cb9dfe60.js" defer></script><script src="/dist/assets/js/8.4a5c0f66.js" defer></script>
  </body>
</html>
