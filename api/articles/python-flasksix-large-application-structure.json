{"title":"Python  Flask(六) 大型网站架构","slug":"python-flasksix-large-application-structure","date":"2017-10-13T05:35:46.000Z","updated":"2019-07-03T13:51:36.858Z","comments":true,"path":"api/articles/python-flasksix-large-application-structure.json","photos":[],"link":"","excerpt":null,"covers":["http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B711.png"],"content":"<h1><span id=\"large-application-structure\">Large Application Structure</span></h1><hr>\n<p>有了之前的基础后我们再来看第六章就轻松多了. 首先贴上<code>稍加修改</code>的后项目地址: <a href=\"https://github.com/834930269/Flask_Study/tree/master/flask-%E8%BD%AC%E6%8D%A2%E7%BB%93%E6%9E%84\" title=\"&lt;code&gt;Click Here: flask-转换结构&lt;/code&gt;\" target=\"_blank\" rel=\"noopener\"><code>Click Here: flask-转换结构</code></a> 我们可以看到项目目录下有两个<code>Config</code>文件,其中<code>副本</code>是同书上一样的使用<code>SQLite</code>作为数据库文件来使用的,而且email的<code>smtp</code>服务器地址为<code>smtp.gmail.com</code>(文件中不是这个地址,需要改一下). 而修改后的<code>config.py</code>使用<code>mysql</code>作为基数据库,<code>smtp.qq.com</code>作为email的发送地址的. 这里说我在<code>config.py</code>的项目中设的各个环境变量即相应的意义.</p>\n<pre><code>1.MAIL_SENDER: 发送email的用户(abc@qq.com)=&gt;\n               在qq邮箱中这一项必须和发送者的邮箱一样\n2.MAIL_USERNAME: 发送者的用户名\n3.MAIL_PASSWORD: 发送者的密码=&gt;这里因为QQ邮箱使用的\n                 是授权码作为密码,所以需要申请一下授权码\n                 正常的密码是无法登录的\n4.FLASKY_ADMIN: 同是发送者的用户名,但是如果不填写的话,\n                则默认不发送邮件,所以可以不用设置.\n                不设置这项的话上面三项均可以忽略.\n5.DATABASE_USERNAME: 你在mysql中创建data_dev数据库时\n                     指定授权可操作该数据库的用户名\n6.DATABASE_PASSWORD: 同5的密码</code></pre><p>因为在<code>mysql</code>的数据库<code>命名规范</code>中,<code>data-dev</code>是不被允许的. 所以我将它改为了<code>data_dev</code>. 在运行项目前,需要先创建<code>data_dev</code>数据库,并创建一个可以操作该数据库的用户,假设我们创建的用户是: <code>USER: ABC</code> <code>USER_PASSWORD: ABC</code> 我们在数据库和用户创建好了以后将<code>相应的环境变量</code>放进环境中: <code>set DATABASE_USERNAME=ABC</code> <code>set DATABASE_PASSWORD=ABC</code> 这里我们不对上面4项进行设置,这样就默认不发送邮件. 然后我们需要建立<code>迁移数据库</code>,以便完成对数据库表项的<code>初始化</code>. <code>python manage.py db init</code> <code>python manage.py db migrate -m &#39;commit&#39;</code> <code>python manage.py db upgrade</code> 然后我们就可以运行项目了! <code>manage.py runserver</code> 结果: <a href=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B711.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B711.png\" alt></a> <a href=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B712.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B712.png\" alt></a> <a href=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B713.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://be-sunshine.cn/wp-content/uploads/2017/10/%E6%8D%95%E8%8E%B713.png\" alt></a></p>\n","categories":[{"name":"Flask","slug":"Flask","count":18,"path":"api/categories/Flask.json"},{"name":"Python","slug":"Flask/Python","count":16,"path":"api/categories/Flask/Python.json"}],"tags":[{"name":"Flask","slug":"Flask","count":20,"path":"api/tags/Flask.json"},{"name":"Python","slug":"Python","count":65,"path":"api/tags/Python.json"}]}