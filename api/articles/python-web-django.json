{"title":"python web django","slug":"python-web-django","date":"2018-01-07T13:39:23.000Z","updated":"2019-07-03T13:51:36.860Z","comments":true,"path":"api/articles/python-web-django.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<p>Django的模板语法，如下:</p>\n<pre><code>{ {}} :用于变量替换。\n{%for i in content%}{ {i}}{%endfor%} : for 循环\n{%extends \"base.html\"%} : 用于指定父模板文件\n{%block name %} ··· {%endblock%} :用于指定被替换的内容,内容名称为 name.\n{%if 条件%} .....{% elif 条件%} ....{%else%}... {%endif%} :用于 if 语句</code></pre><p>常用的 ORM 查询操作:</p>\n<pre><code>ModelName.object.all() #返回 model 的所有数据集\n\nModelName.object.filter(**kwargs) #返回符合筛选条件的数据集\n\nModelName.object.exclude(**kwargs) #返回不符合筛选条件的数据集\n\nModelName.object.get(**kwargs) #用于查询单条记录</code></pre><h1 id=\"创建数据\"><a href=\"#创建数据\" class=\"headerlink\" title=\"创建数据\"></a>创建数据</h1><pre><code># 第一种方式\n# models.UserInfo.objects.create(username=&quot;root&quot;,password=&quot;123&quot;)\n# 第二种方式\n# obj = models.UserInfo(username=&apos;fzh&apos;, password=&quot;iajtag&quot;)\n# obj.save()\n# 第三种方式\n# dic = {&apos;username&apos;:&apos;fgf&apos;, &apos;password&apos;:&apos;666&apos;}\n# models.UserInfo.objects.create(**dic)</code></pre><h1 id=\"查询数据\"><a href=\"#查询数据\" class=\"headerlink\" title=\"查询数据\"></a>查询数据</h1><pre><code># result = models.UserInfo.objects.all()  # 查询所有，为QuerySet类型，可理解成列表\n# result = models.UserInfo.objects.filter(username=&quot;fgf&quot;,password=&quot;666&quot;)  # 列表\n# result = models.UserInfo.objects.filter(username=&quot;fgf&quot;).first()  # 对象\n# 条件查询。filter 相当于where查询条件，里面的&quot;，&quot;会组成and条件\n# for row in result:  # 打印查询到数据。\n#     print(row.id,row.username,row.password)\n\n# 查看QuerySet类型具体做了什么事情，可以： print(result.query)</code></pre><h1 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h1><pre><code># models.UserInfo.objects.all().delete()  # 删除所有\n# models.UserInfo.objects.filter(id=4).delete()  # 删除所有</code></pre><h1 id=\"更新数据\"><a href=\"#更新数据\" class=\"headerlink\" title=\"更新数据\"></a>更新数据</h1><pre><code># models.UserInfo.objects.all().update(password=8888)\n# models.UserInfo.objects.filter(id=3).update(password=888888)</code></pre><p>数据库(ORM)操作相关: 如果想要完全删除migrations(使用sqllite时),需要将所有缓存文件/夹都删掉 然后新建一个空的migrations</p>\n<blockquote>\n<p>python manage.py makemigrations –empty (你的app名字) python manage.py makemigrations python manage.py migrate 解决!</p>\n</blockquote>\n","categories":[{"name":"django","slug":"django","count":2,"path":"api/categories/django.json"},{"name":"Python","slug":"django/Python","count":2,"path":"api/categories/django/Python.json"},{"name":"Web","slug":"django/Python/Web","count":2,"path":"api/categories/django/Python/Web.json"}],"tags":[{"name":"Python","slug":"Python","count":65,"path":"api/tags/Python.json"},{"name":"Web","slug":"Web","count":7,"path":"api/tags/Web.json"},{"name":"django","slug":"django","count":2,"path":"api/tags/django.json"}]}