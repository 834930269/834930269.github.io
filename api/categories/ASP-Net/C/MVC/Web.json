{"name":"Web","slug":"ASP-Net/C/MVC/Web","count":1,"postlist":[{"title":"ASP.NET MVC Filter 登录限制-类Python装饰器","slug":"asp-net-mvc-filter-python","date":"2017-12-10T10:12:21.000Z","updated":"2019-07-03T13:51:36.859Z","comments":true,"path":"api/articles/asp-net-mvc-filter-python.json","excerpt":"","keywords":null,"cover":null,"content":"<p>想必学过Flask编写Web服务端的都对 <strong>@login_required</strong> 很熟悉吧,一个语句决定了访问者是否有权限访问当前页面. 那么疑问来了,ASP.NET MVC中是否有类似于Python装饰器一类的语法呢? 答案是有的,如果仅仅是权限以及登录确认的判断的话,ASP.NET MVC 有一个 <strong>AuthorizeAttribute</strong> 类,这个类的结构以及用法可以替代 <strong>@login_required</strong>,接下来编写实现代码. 首先新建一个ASP.NET MVC 项目,新建一个Filter文件夹,该文件夹下存放网站允许访问一类的类. 新建<strong>MyAuthorizeAttribute</strong>类,继承<strong>AuthorizeAttribute</strong> 类,重写AuthorizeCore和HandleUnauthorizedRequest方法. 第一个方法是授权检察,第二个方法是权限判断失败时执行的操作. 接下来实现当时间分钟是偶数时允许登录.</p>\n<pre><code>//MyAuthorizeAttribute.cs\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace WebApplication3.Filter\n{\n    public class MyAuthorizeAttribute :AuthorizeAttribute\n    {\n        protected override bool AuthorizeCore(HttpContextBase httpContext)\n        {\n            return DateTime.Now.Minute % 2 == 0;  \n        }\n        protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)\n        {\n            filterContext.HttpContext.Response.Redirect(&quot;/Home/ShowTip&quot;);\n\n            //base.HandleUnauthorizedRequest(filterContext);  \n        }  \n    }\n}\n\n\n//HomeController.cs\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing WebApplication3.Filter;\n\nnamespace WebApplication3.Controllers\n{\n    public class HomeController : Controller\n    {\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n        [MyAuthorizeAttribute]\n        public ActionResult ShowDetails2()\n        {\n            return View();\n        }\n        public ActionResult ShowTip()\n        {\n            return View();\n        }  \n    }\n}</code></pre>","text":"想必学过Flask编写Web服务端的都对 @login_required 很熟悉吧,一个语句决定了访问者是否有权限访问当前页面. 那么疑问来了,ASP.NET MVC中是否有类似于Python装饰器一类的语法呢? 答案是有的,如果仅仅是权限以及登录确认的判断的话,ASP.NET ","link":"","raw":null,"photos":[],"categories":[{"name":"ASP.Net","slug":"ASP-Net","count":3,"path":"api/categories/ASP-Net.json"},{"name":"C#","slug":"ASP-Net/C","count":2,"path":"api/categories/ASP-Net/C.json"},{"name":"MVC","slug":"ASP-Net/C/MVC","count":1,"path":"api/categories/ASP-Net/C/MVC.json"},{"name":"Web","slug":"ASP-Net/C/MVC/Web","count":1,"path":"api/categories/ASP-Net/C/MVC/Web.json"}],"tags":[{"name":"ASP.NET","slug":"ASP-NET","count":6,"path":"api/tags/ASP-NET.json"},{"name":"C#","slug":"C","count":6,"path":"api/tags/C.json"},{"name":"MVC","slug":"MVC","count":1,"path":"api/tags/MVC.json"},{"name":"Web","slug":"Web","count":7,"path":"api/tags/Web.json"}]}]}